# Migration `20200629111658`

This migration has been generated by loan-petit at 6/29/2020, 11:16:58 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."_CustomerToUser" (
"A" integer  NOT NULL ,"B" integer  NOT NULL )

CREATE UNIQUE INDEX "_CustomerToUser_AB_unique" ON "public"."_CustomerToUser"("A","B")

CREATE  INDEX "_CustomerToUser_B_index" ON "public"."_CustomerToUser"("B")

ALTER TABLE "public"."_CustomerToUser" ADD FOREIGN KEY ("A")REFERENCES "public"."Customer"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_CustomerToUser" ADD FOREIGN KEY ("B")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200617094624..20200629111658
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRES_URL")
   default  = true
 }
 generator client {
@@ -20,11 +20,12 @@
   phone                   String?
   address                 String?
   minScheduleNotice       Int                     @default(0)
   oAuthToken              OAuthToken?
-  appointmentTypes        AppointmentType[]
   recurrentAvailabilities RecurrentAvailability[]
   availabilityModifiers   AvailabilityModifier[]
+  customers               Customer[]              @relation(references: [id])
+  appointmentTypes        AppointmentType[]
   appointments            Appointment[]
 }
 model OAuthToken {
@@ -72,8 +73,9 @@
   lastName      String
   phone         String?
   address       String?
   isBlackListed Boolean       @default(false)
+  users         User[]        @relation(references: [id])
   appointments  Appointment[]
 }
 model Appointment {
```


