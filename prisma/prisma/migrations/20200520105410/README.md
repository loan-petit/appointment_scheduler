# Migration `20200520105410`

This migration has been generated by loan-petit at 5/20/2020, 10:54:10 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."RecurrentAvailability" (
"day" text  NOT NULL ,"endTime" integer  NOT NULL ,"id" SERIAL,"startTime" integer  NOT NULL ,"userId" integer   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Availability" (
"date" timestamp(3)  NOT NULL ,"endTime" integer  NOT NULL ,"id" SERIAL,"startTime" integer  NOT NULL ,"userId" integer   ,
    PRIMARY KEY ("id"))

ALTER TABLE "public"."AvailabilitySlot" DROP CONSTRAINT IF EXiSTS "AvailabilitySlot_userId_fkey";

ALTER TABLE "public"."RecurrentAvailabilitySlot" DROP CONSTRAINT IF EXiSTS "RecurrentAvailabilitySlot_userId_fkey";

ALTER TABLE "public"."RecurrentAvailability" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."Availability" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE SET NULL  ON UPDATE CASCADE

DROP TABLE "public"."AvailabilitySlot";

DROP TABLE "public"."RecurrentAvailabilitySlot";
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200518140036..20200520105410
--- datamodel.dml
+++ datamodel.dml
@@ -1,26 +1,26 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRES_URL")
   default  = true
 }
 generator client {
   provider = "prisma-client-js"
 }
 model User {
-  id                      Int                         @default(autoincrement()) @id
-  email                   String                      @unique
+  id                      Int                     @default(autoincrement()) @id
+  email                   String                  @unique
   firstName               String
   lastName                String
   password                String
   websiteUrl              String?
   address                 String?
-  minScheduleNotice       Int                         @default(0)
+  minScheduleNotice       Int                     @default(0)
   events                  Event[]
-  recurrentAvailabilities RecurrentAvailabilitySlot[]
-  availabilities          AvailabilitySlot[]
+  recurrentAvailabilities RecurrentAvailability[]
+  availabilities          Availability[]
 }
 model Event {
   id                  Int     @default(autoincrement()) @id
@@ -32,18 +32,18 @@
   user                User?   @relation(fields: [userId], references: [id])
   userId              Int?
 }
-model RecurrentAvailabilitySlot {
+model RecurrentAvailability {
   id        Int    @default(autoincrement()) @id
   day       String
   startTime Int
   endTime   Int
   user      User?  @relation(fields: [userId], references: [id])
   userId    Int?
 }
-model AvailabilitySlot {
+model Availability {
   id        Int      @default(autoincrement()) @id
   date      DateTime
   startTime Int
   endTime   Int
```


