# Migration `20200518135249`

This migration has been generated by loan-petit at 5/18/2020, 1:52:49 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."User" ADD COLUMN "address" text   ,
ADD COLUMN "minScheduleNotice" integer  NOT NULL DEFAULT 0,
ADD COLUMN "websiteUrl" text   ;

ALTER TABLE "public"."AvailabilitySlot" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."Event" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."RecurrentAvailabilitySlot" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200518135249
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,52 @@
+datasource db {
+  provider = "postgresql"
+  url      = env("POSTGRES_URL")
+  default  = true
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+model User {
+  id                      Int                         @default(autoincrement()) @id
+  email                   String                      @unique
+  firstName               String
+  lastName                String
+  password                String
+  websiteUrl              String?
+  address                 String?
+  minScheduleNotice       Int                         @default(0)
+  events                  Event[]
+  recurrentAvailabilities RecurrentAvailabilitySlot[]
+  availabilities          AvailabilitySlot[]
+}
+
+model Event {
+  id                  Int     @default(autoincrement()) @id
+  name                String
+  description         String?
+  duration            Int
+  price               Float?
+  generateClientSheet Boolean @default(false)
+  User                User?   @relation(fields: [userId], references: [id])
+  userId              Int?
+}
+
+model RecurrentAvailabilitySlot {
+  id        Int    @default(autoincrement()) @id
+  day       String
+  startTime Int
+  endTime   Int
+  User      User?  @relation(fields: [userId], references: [id])
+  userId    Int?
+}
+
+model AvailabilitySlot {
+  id        Int      @default(autoincrement()) @id
+  date      DateTime
+  startTime Int
+  endTime   Int
+  User      User?    @relation(fields: [userId], references: [id])
+  userId    Int?
+}
```


